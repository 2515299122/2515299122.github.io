{"version":3,"sources":["lib/hbe.js"],"names":["_regeneratorRuntime","e","t","r","Object","prototype","n","hasOwnProperty","o","defineProperty","value","i","Symbol","a","iterator","c","asyncIterator","u","toStringTag","define","enumerable","configurable","writable","wrap","Generator","create","Context","makeInvokeMethod","tryCatch","type","arg","call","h","l","f","s","y","GeneratorFunction","GeneratorFunctionPrototype","p","this","d","getPrototypeOf","v","values","g","defineIteratorMethods","forEach","_invoke","AsyncIterator","invoke","_typeof","resolve","__await","then","callInvokeWithMethodAndArg","Error","done","method","delegate","maybeInvokeDelegate","sent","_sent","dispatchException","abrupt","TypeError","resultName","next","nextLoc","pushTryEntry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","push","resetTryEntry","completion","reset","isNaN","length","displayName","isGeneratorFunction","constructor","name","mark","setPrototypeOf","__proto__","awrap","async","Promise","keys","reverse","pop","prev","charAt","slice","stop","rval","handle","complete","finish","catch","delegateYield","asyncGeneratorStep","gen","reject","_next","_throw","key","info","error","_asyncToGenerator","fn","self","args","arguments","apply","err","undefined","cryptoObj","window","crypto","msCrypto","storage","localStorage","storageName","location","pathname","keySalt","textToArray","ivSalt","knownPrefix","mainElement","document","getElementById","wrongPassMessage","dataset","wrongHashMessage","dataElement","getElementsByTagName","encryptedData","innerText","HmacDigist","hexToArray","Uint8Array","match","map","parseInt","ba","Array","j","codePointAt","arrayBufferToHex","arrayBuffer","byteLength","view","result","toString","getExecutableScript","_x","_getExecutableScript","_callee2","oldElem","out","_context2","createElement","att","convertHTMLToElement","_x2","_convertHTMLToElement","_callee4","content","_context4","innerHTML","querySelectorAll","_ref2","_callee3","elem","_context3","t0","t1","replaceWith","_x9","getKeyMaterial","password","encoder","TextEncoder","subtle","importKey","encode","getHmacKey","keyMaterial","deriveKey","hash","salt","buffer","iterations","getDecryptKey","getIv","deriveBits","verifyContent","_x3","_x4","_verifyContent","_callee5","encoded","signature","_context5","verify","console","log","concat","alert","decrypt","_x5","_x6","_x7","_decrypt","_callee7","decryptKey","iv","hmacKey","typedArray","_context7","_ref3","_callee6","decoder","decoded","hideButton","tocDiv","tocDivs","idx","event","_context6","TextDecoder","decode","startsWith","textContent","classList","add","addEventListener","removeItem","reload","style","display","appendChild","getAttribute","src","NexT","boot","refresh","getElementsByClassName","Event","dispatchEvent","_x10","oldStorageData","JSON","parse","getItem","sIv","sDk","dk","sHmk","hmk","dkCK","hmkCK","_ref","_callee","_context","isComposing","keyCode","exportKey","newStorageData","setItem","stringify","_x8","hbeLoader"],"mappings":"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","file":"../../lib/hbe.js","sourcesContent":["(() => {\n  'use strict';\n\n  const cryptoObj = window.crypto || window.msCrypto;\n  const storage = window.localStorage;\n\n  const storageName = 'hexo-blog-encrypt:#' + window.location.pathname;\n  const keySalt = textToArray('hexo-blog-encrypt的作者们都是大帅比!');\n  const ivSalt = textToArray('hexo-blog-encrypt是地表最强Hexo加密插件!');\n\n// As we can't detect the wrong password with AES-CBC,\n// so adding an empty div and check it when decrption.\nconst knownPrefix = \"<hbe-prefix></hbe-prefix>\";\n\n  const mainElement = document.getElementById('hexo-blog-encrypt');\n  const wrongPassMessage = mainElement.dataset['wpm'];\n  const wrongHashMessage = mainElement.dataset['whm'];\n  const dataElement = mainElement.getElementsByTagName('script')['hbeData'];\n  const encryptedData = dataElement.innerText;\n  const HmacDigist = dataElement.dataset['hmacdigest'];\n\n  function hexToArray(s) {\n    return new Uint8Array(s.match(/[\\da-f]{2}/gi).map((h => {\n      return parseInt(h, 16);\n    })));\n  }\n\n  function textToArray(s) {\n    var i = s.length;\n    var n = 0;\n    var ba = new Array()\n\n    for (var j = 0; j < i;) {\n      var c = s.codePointAt(j);\n      if (c < 128) {\n        ba[n++] = c;\n        j++;\n      } else if ((c > 127) && (c < 2048)) {\n        ba[n++] = (c >> 6) | 192;\n        ba[n++] = (c & 63) | 128;\n        j++;\n      } else if ((c > 2047) && (c < 65536)) {\n        ba[n++] = (c >> 12) | 224;\n        ba[n++] = ((c >> 6) & 63) | 128;\n        ba[n++] = (c & 63) | 128;\n        j++;\n      } else {\n        ba[n++] = (c >> 18) | 240;\n        ba[n++] = ((c >> 12) & 63) | 128;\n        ba[n++] = ((c >> 6) & 63) | 128;\n        ba[n++] = (c & 63) | 128;\n        j += 2;\n      }\n    }\n    return new Uint8Array(ba);\n  }\n\n  function arrayBufferToHex(arrayBuffer) {\n    if (typeof arrayBuffer !== 'object' || arrayBuffer === null || typeof arrayBuffer.byteLength !== 'number') {\n      throw new TypeError('Expected input to be an ArrayBuffer')\n    }\n\n    var view = new Uint8Array(arrayBuffer)\n    var result = ''\n    var value\n\n    for (var i = 0; i < view.length; i++) {\n      value = view[i].toString(16)\n      result += (value.length === 1 ? '0' + value : value)\n    }\n\n    return result\n  }\n\n  async function getExecutableScript(oldElem) {\n    let out = document.createElement('script');\n    const attList = ['type', 'text', 'src', 'crossorigin', 'defer', 'referrerpolicy'];\n    attList.forEach((att) => {\n      if (oldElem[att])\n        out[att] = oldElem[att];\n    })\n\n    return out;\n  }\n\n  async function convertHTMLToElement(content) {\n    let out = document.createElement('div');\n    out.innerHTML = content;\n    out.querySelectorAll('script').forEach(async (elem) => {\n      elem.replaceWith(await getExecutableScript(elem));\n    });\n\n    return out;\n  }\n\n  function getKeyMaterial(password) {\n    let encoder = new TextEncoder();\n    return cryptoObj.subtle.importKey(\n      'raw',\n      encoder.encode(password),\n      {\n        'name': 'PBKDF2',\n      },\n      false,\n      [\n        'deriveKey',\n        'deriveBits',\n      ]\n    );\n  }\n\n  function getHmacKey(keyMaterial) {\n    return cryptoObj.subtle.deriveKey({\n      'name': 'PBKDF2',\n      'hash': 'SHA-256',\n      'salt': keySalt.buffer,\n      'iterations': 1024\n    }, keyMaterial, {\n      'name': 'HMAC',\n      'hash': 'SHA-256',\n      'length': 256,\n    }, true, [\n      'verify',\n    ]);\n  }\n\n  function getDecryptKey(keyMaterial) {\n    return cryptoObj.subtle.deriveKey({\n      'name': 'PBKDF2',\n      'hash': 'SHA-256',\n      'salt': keySalt.buffer,\n      'iterations': 1024,\n    }, keyMaterial, {\n      'name': 'AES-CBC',\n      'length': 256,\n    }, true, [\n      'decrypt',\n    ]);\n  }\n\n  function getIv(keyMaterial) {\n    return cryptoObj.subtle.deriveBits({\n      'name': 'PBKDF2',\n      'hash': 'SHA-256',\n      'salt': ivSalt.buffer,\n      'iterations': 512,\n    }, keyMaterial, 16 * 8);\n  }\n\n  async function verifyContent(key, content) {\n    const encoder = new TextEncoder();\n    const encoded = encoder.encode(content);\n\n    let signature = hexToArray(HmacDigist);\n\n    const result = await cryptoObj.subtle.verify({\n      'name': 'HMAC',\n      'hash': 'SHA-256',\n    }, key, signature, encoded);\n    console.log(`Verification result: ${result}`);\n    if (!result) {\n      alert(wrongHashMessage);\n      console.log(`${wrongHashMessage}, got `, signature, ` but proved wrong.`);\n    }\n    return result;\n  }\n\n  async function decrypt(decryptKey, iv, hmacKey) {\n    let typedArray = hexToArray(encryptedData);\n\n    const result = await cryptoObj.subtle.decrypt({\n      'name': 'AES-CBC',\n      'iv': iv,\n    }, decryptKey, typedArray.buffer).then(async (result) => {\n      const decoder = new TextDecoder();\n      const decoded = decoder.decode(result);\n\n      // check the prefix, if not then we can sure here is wrong password.\n      if (!decoded.startsWith(knownPrefix)) {\n        throw \"Decode successfully but not start with KnownPrefix.\";\n      }\n\n      const hideButton = document.createElement('button');\n      hideButton.textContent = 'Encrypt again';\n      hideButton.type = 'button';\n      hideButton.classList.add(\"hbe-button\");\n      hideButton.addEventListener('click', () => {\n        window.localStorage.removeItem(storageName);\n        window.location.reload();\n      });\n\n      document.getElementById('hexo-blog-encrypt').style.display = 'inline';\n      document.getElementById('hexo-blog-encrypt').innerHTML = '';\n      document.getElementById('hexo-blog-encrypt').appendChild(await convertHTMLToElement(decoded));\n      document.getElementById('hexo-blog-encrypt').appendChild(hideButton);\n\n      // support html5 lazyload functionality.\n      document.querySelectorAll('img').forEach((elem) => {\n        if (elem.getAttribute(\"data-src\") && !elem.src) {\n          elem.src = elem.getAttribute('data-src');\n        }\n      });\n\n      // support theme-next refresh\n      window.NexT && NexT.boot && typeof NexT.boot.refresh === 'function' && NexT.boot.refresh();\n\n      // TOC part\n      var tocDiv = document.getElementById(\"toc-div\");\n      if (tocDiv) {\n        tocDiv.style.display = 'inline';\n      }\n\n      var tocDivs = document.getElementsByClassName('toc-div-class');\n      if (tocDivs && tocDivs.length > 0) {\n        for (var idx = 0; idx < tocDivs.length; idx++) {\n          tocDivs[idx].style.display = 'inline';\n        }\n      }\n      \n      // trigger event\n      var event = new Event('hexo-blog-decrypt');\n      window.dispatchEvent(event);\n\n      return await verifyContent(hmacKey, decoded);\n    }).catch((e) => {\n      alert(wrongPassMessage);\n      console.log(e);\n      return false;\n    });\n\n    return result;\n\n  }\n\n  function hbeLoader() {\n\n    const oldStorageData = JSON.parse(storage.getItem(storageName));\n\n    if (oldStorageData) {\n      console.log(`Password got from localStorage(${storageName}): `, oldStorageData);\n\n      const sIv = hexToArray(oldStorageData.iv).buffer;\n      const sDk = oldStorageData.dk;\n      const sHmk = oldStorageData.hmk;\n\n      cryptoObj.subtle.importKey('jwk', sDk, {\n        'name': 'AES-CBC',\n        'length': 256,\n      }, true, [\n        'decrypt',\n      ]).then((dkCK) => {\n        cryptoObj.subtle.importKey('jwk', sHmk, {\n          'name': 'HMAC',\n          'hash': 'SHA-256',\n          'length': 256,\n        }, true, [\n          'verify',\n        ]).then((hmkCK) => {\n          decrypt(dkCK, sIv, hmkCK).then((result) => {\n            if (!result) {\n              storage.removeItem(storageName);\n            }\n          });\n        });\n      });\n    }\n\n    mainElement.addEventListener('keydown', async (event) => {\n      if (event.isComposing || event.keyCode === 13) {\n        const password = document.getElementById('hbePass').value;\n        const keyMaterial = await getKeyMaterial(password);\n        const hmacKey = await getHmacKey(keyMaterial);\n        const decryptKey = await getDecryptKey(keyMaterial);\n        const iv = await getIv(keyMaterial);\n\n        decrypt(decryptKey, iv, hmacKey).then((result) => {\n          console.log(`Decrypt result: ${result}`);\n          if (result) {\n            cryptoObj.subtle.exportKey('jwk', decryptKey).then((dk) => {\n              cryptoObj.subtle.exportKey('jwk', hmacKey).then((hmk) => {\n                const newStorageData = {\n                  'dk': dk,\n                  'iv': arrayBufferToHex(iv),\n                  'hmk': hmk,\n                };\n                storage.setItem(storageName, JSON.stringify(newStorageData));\n              });\n            });\n          }\n        });\n      }\n    });\n  }\n\n  hbeLoader();\n\n})();\n"]}