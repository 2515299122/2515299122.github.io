<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Bing&#39;s Blog</title>
  
  
  <link href="https://blog.bingw.top/atom.xml" rel="self"/>
  
  <link href="https://blog.bingw.top/"/>
  <updated>2024-01-19T11:49:19.000Z</updated>
  <id>https://blog.bingw.top/</id>
  
  <author>
    <name>冰冰</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>matlab基础</title>
    <link href="https://blog.bingw.top/12202488f61469/"/>
    <id>https://blog.bingw.top/12202488f61469/</id>
    <published>2024-01-19T10:12:44.000Z</published>
    <updated>2024-01-19T11:49:19.000Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="清空环境变量及命令">清空环境变量及命令</h2><div class="sourceCode" id="cb1"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span> <span class="va">all</span>    <span class="co">% 清除工作区中的所有变量</span></span><span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="va">clc</span>          <span class="co">% 清除命令窗口中的所有命令</span></span></code></pre></div></div><div class="story post-story"><h2 id="变量命令规则">变量命令规则</h2><ol type="1"><li>数字名称区分大小写</li><li>标记名长度不超过63位ABCDEFGHIJKLMNOPQRSTUVWXYZ123456ABCDEFGHIJKLMNOPQRSTUVWXYZ123456 = 3</li><li>标志名以字母开头，可以由字母、数字和下划线组成，但不能使用标志点 3A = 4 .a = 5 /b = 5</li><li>指标名称应简洁明了，通过指标名称可以理解出指标所表示的物理意义</li></ol><div class="sourceCode" id="cb2"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">3</span><span class="op">,</span><span class="fl">5</span>)</span><span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="va">rows</span> <span class="op">=</span> <span class="va">size</span>(<span class="va">A</span><span class="op">,</span> <span class="fl">1</span>)</span><span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="va">cols</span> <span class="op">=</span> <span class="va">size</span>(<span class="va">A</span><span class="op">,</span> <span class="fl">2</span>)</span></code></pre></div><p><img src="https://bu.dusays.com/2024/01/18/65a91d41236f8.png" class="lazyload" data-srcset="https://bu.dusays.com/2024/01/18/65a91d41236f8.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p></div><div class="story post-story"><h2 id="数据类型">数据类型</h2><h3 id="数字">数字</h3><h3 id="字符与字符串">字符与字符串</h3><div class="sourceCode" id="cb3"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="va">s</span> <span class="op">=</span> <span class="ss">&#39;a&#39;</span></span><span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="va">abs</span>(<span class="va">s</span>)</span><span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="va">char</span>(<span class="fl">65</span>)</span><span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="va">num2str</span>(<span class="fl">65</span>)</span><span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a></span><span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="va">str</span> <span class="op">=</span> <span class="ss">&#39;I Love MATLAB &amp; Machine Learning.&#39;</span></span><span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span><span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="va">length</span>(<span class="va">str</span>)</span><span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a></span><span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="va">doc</span> <span class="va">num2str</span></span></code></pre></div><h3 id="矩阵">矩阵</h3><div class="sourceCode" id="cb4"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span><span class="op">;</span> <span class="fl">4</span> <span class="fl">5</span> <span class="fl">2</span><span class="op">;</span> <span class="fl">3</span> <span class="fl">2</span> <span class="fl">7</span>]</span><span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="co">% 转置</span></span><span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> <span class="va">A</span><span class="op">&#39;</span></span><span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co">% 将A矩阵按列顺序依次展开成一列</span></span><span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="va">C</span> <span class="op">=</span> <span class="va">A</span>(<span class="op">:</span>)</span><span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co">% 求逆</span></span><span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="va">D</span> <span class="op">=</span> <span class="va">inv</span>(<span class="va">A</span>)</span><span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="co">% 矩阵乘法</span></span><span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">*</span> <span class="va">D</span></span><span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co">% 生成三维10行5列矩阵</span></span><span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="va">E</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="fl">10</span><span class="op">,</span><span class="fl">5</span><span class="op">,</span><span class="fl">3</span>)</span><span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="va">E</span>(<span class="op">:,:,</span><span class="fl">1</span>) <span class="op">=</span> <span class="va">rand</span>(<span class="fl">10</span><span class="op">,</span><span class="fl">5</span>)</span><span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">% 最大值是5的10行5列矩阵</span></span><span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="va">E</span>(<span class="op">:,:,</span><span class="fl">2</span>) <span class="op">=</span> <span class="va">randi</span>(<span class="fl">5</span><span class="op">,</span><span class="fl">10</span><span class="op">,</span><span class="fl">5</span>)</span><span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">% 正态分布的10行5列矩阵</span></span><span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="va">E</span>(<span class="op">:,:,</span><span class="fl">3</span>) <span class="op">=</span> <span class="va">randn</span>(<span class="fl">10</span><span class="op">,</span><span class="fl">5</span>)</span></code></pre></div><p><img src="https://bu.dusays.com/2024/01/18/65a93eb722311.png" class="lazyload" data-srcset="https://bu.dusays.com/2024/01/18/65a93eb722311.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p><h3 id="元胞数组">元胞数组</h3><div class="sourceCode" id="cb5"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">% 1行6列元胞数组</span></span><span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="va">cell</span>(<span class="fl">1</span><span class="op">,</span> <span class="fl">6</span>)</span><span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">% 索引从1开始</span></span><span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">% 生成3阶单位矩阵</span></span><span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="va">A</span>&#123;<span class="fl">2</span>&#125; <span class="op">=</span> <span class="va">eye</span>(<span class="fl">3</span>)</span><span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">% 生成5阶幻方</span></span><span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="va">A</span>&#123;<span class="fl">5</span>&#125; <span class="op">=</span> <span class="va">magic</span>(<span class="fl">5</span>)</span><span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> <span class="va">A</span>&#123;<span class="fl">5</span>&#125;</span></code></pre></div></div><div class="story post-story"><h2 id="结构体">结构体</h2><div class="sourceCode" id="cb6"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">% name 和 price为键</span></span><span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="va">books</span> <span class="op">=</span> <span class="va">struct</span>(<span class="ss">&#39;name&#39;</span><span class="op">,&lt;</span><span class="bn">!--swig￼0--&gt;,&#39;price&#39;,[30 40])</span></span><span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="va">books</span>.<span class="va">name</span></span><span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co">% 结果为cell类型 &#123;&#39;Machine Learning&#39;&#125;</span></span><span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="va">books</span>.<span class="va">name</span>(<span class="fl">1</span>)</span><span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="co">% 结果为字符串类型 &#39;Machine Learning&#39;</span></span><span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="va">books</span>.<span class="va">name</span>&#123;<span class="fl">1</span>&#125;</span></code></pre></div></div><div class="story post-story"><h2 id="矩阵操作">矩阵操作</h2><h3 id="矩阵的定义与构造">矩阵的定义与构造</h3><div class="sourceCode" id="cb7"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span> <span class="fl">5</span> <span class="fl">8</span> <span class="fl">5</span> <span class="fl">4</span> <span class="fl">6</span>]</span><span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co">% 1:初始位置  9:结束位置  2:步长</span></span><span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="fl">9</span></span><span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co">% 复制B这个整体 3行1列</span></span><span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="va">C</span> <span class="op">=</span> <span class="va">repmat</span>(<span class="va">B</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">1</span>)</span><span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co">% 2行4列的全1矩阵</span></span><span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="va">D</span> <span class="op">=</span> <span class="va">ones</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">4</span>)</span></code></pre></div><h3 id="矩阵的四则运算">矩阵的四则运算</h3><div class="sourceCode" id="cb8"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span> <span class="fl">4</span><span class="op">;</span> <span class="fl">5</span> <span class="fl">6</span> <span class="fl">7</span> <span class="fl">8</span>]</span><span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> [<span class="fl">1</span> <span class="fl">1</span> <span class="fl">2</span> <span class="fl">2</span><span class="op">;</span> <span class="fl">2</span> <span class="fl">2</span> <span class="fl">1</span> <span class="fl">1</span>]</span><span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="va">C</span> <span class="op">=</span> <span class="va">A</span> <span class="op">+</span> <span class="va">B</span></span><span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a><span class="va">D</span> <span class="op">=</span> <span class="va">A</span> <span class="op">-</span> <span class="va">B</span></span><span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="va">E</span> <span class="op">=</span> <span class="va">A</span> <span class="op">*</span> <span class="va">B</span><span class="op">&#39;</span></span><span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="co">% 对应项相乘</span></span><span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="va">F</span> <span class="op">=</span> <span class="va">A</span> <span class="op">.*</span> <span class="va">B</span></span><span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="co">% A乘以B的逆</span></span><span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="va">G</span> <span class="op">=</span> <span class="va">A</span> <span class="op">/</span> <span class="va">B</span>     <span class="co">% B * G = A</span></span><span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="co">% 对应项相除</span></span><span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a><span class="va">H</span> <span class="op">=</span> <span class="va">A</span> <span class="op">./</span> <span class="va">B</span></span></code></pre></div><h3 id="矩阵的下标">矩阵的下标</h3><div class="sourceCode" id="cb9"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">% name 和 price为键</span></span><span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="va">books</span> <span class="op">=</span> <span class="va">struct</span>(<span class="ss">&#39;name&#39;</span><span class="op">,&lt;</span><span class="bn">!--swig￼1--&gt;,&#39;price&#39;,[30 40])</span></span><span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="va">books</span>.<span class="va">name</span></span><span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="co">% 结果为cell类型 &#123;&#39;Machine Learning&#39;&#125;</span></span><span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="va">books</span>.<span class="va">name</span>(<span class="fl">1</span>)</span><span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a><span class="co">% 结果为字符串类型 &#39;Machine Learning&#39;</span></span><span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="va">books</span>.<span class="va">name</span>&#123;<span class="fl">1</span>&#125;</span><span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span> <span class="fl">5</span> <span class="fl">8</span> <span class="fl">5</span> <span class="fl">4</span> <span class="fl">6</span>]</span><span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">% 1:初始位置  9:结束位置  2:步长</span></span><span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">:</span><span class="fl">9</span></span><span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">% 复制B这个整体 3行1列</span></span><span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="va">C</span> <span class="op">=</span> <span class="va">repmat</span>(<span class="va">B</span><span class="op">,</span> <span class="fl">3</span><span class="op">,</span> <span class="fl">1</span>)</span><span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">% 2行4列的全1矩阵</span></span><span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="va">D</span> <span class="op">=</span> <span class="va">ones</span>(<span class="fl">2</span><span class="op">,</span> <span class="fl">4</span>)</span><span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> [<span class="fl">1</span> <span class="fl">2</span> <span class="fl">3</span> <span class="fl">4</span><span class="op">;</span> <span class="fl">5</span> <span class="fl">6</span> <span class="fl">7</span> <span class="fl">8</span>]</span><span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> [<span class="fl">1</span> <span class="fl">1</span> <span class="fl">2</span> <span class="fl">2</span><span class="op">;</span> <span class="fl">2</span> <span class="fl">2</span> <span class="fl">1</span> <span class="fl">1</span>]</span><span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a><span class="va">C</span> <span class="op">=</span> <span class="va">A</span> <span class="op">+</span> <span class="va">B</span></span><span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="va">D</span> <span class="op">=</span> <span class="va">A</span> <span class="op">-</span> <span class="va">B</span></span><span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="va">E</span> <span class="op">=</span> <span class="va">A</span> <span class="op">*</span> <span class="va">B</span><span class="op">&#39;</span></span><span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">% 对应项相乘</span></span><span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="va">F</span> <span class="op">=</span> <span class="va">A</span> <span class="op">.*</span> <span class="va">B</span></span><span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">% A乘以B的逆</span></span><span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="va">G</span> <span class="op">=</span> <span class="va">A</span> <span class="op">/</span> <span class="va">B</span>     <span class="co">% B * G = A</span></span><span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">% 对应项相除</span></span><span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="va">H</span> <span class="op">=</span> <span class="va">A</span> <span class="op">./</span> <span class="va">B</span></span><span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="va">magic</span>(<span class="fl">5</span>)</span><span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">%取2行3列</span></span><span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> <span class="va">A</span>(<span class="fl">2</span><span class="op">,</span><span class="fl">3</span>)</span><span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co">% :取全部</span></span><span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a><span class="co">% 取第三行</span></span><span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="va">C</span> <span class="op">=</span> <span class="va">A</span>(<span class="fl">3</span><span class="op">,:</span>)</span><span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a><span class="co">% 取第四列</span></span><span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="va">D</span> <span class="op">=</span> <span class="va">A</span>(<span class="op">:,</span><span class="fl">4</span>)</span><span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a><span class="co">% 查找A中大于20的元素并返回索引行m和索引列n</span></span><span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a>[<span class="va">m</span><span class="op">,</span> <span class="va">n</span>] <span class="op">=</span> <span class="va">find</span>(<span class="va">A</span> <span class="op">&gt;</span> <span class="fl">20</span>)</span></code></pre></div></div><div class="story post-story"><h2 id="逻辑与流程控制">逻辑与流程控制</h2><h3 id="if-...-else-...-end">if ... else ... end</h3><div class="sourceCode" id="cb10"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co">%&#123;</span></span><span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> 判断条件</span><span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    控制语句</span><span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span></span><span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    控制语句</span><span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a><span class="co">%&#125;</span></span><span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a><span class="va">A</span> <span class="op">=</span> <span class="va">rand</span>(<span class="fl">1</span><span class="op">,</span><span class="fl">10</span>)</span><span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a><span class="va">limit</span> <span class="op">=</span> <span class="fl">0.75</span><span class="op">;</span></span><span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a></span><span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a><span class="va">B</span> <span class="op">=</span> (<span class="va">A</span> <span class="op">&gt;</span> <span class="va">limit</span>)<span class="op">;</span>   <span class="co">% B is a vector of logical values</span></span><span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="va">any</span>(<span class="va">B</span>)</span><span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a><span class="co">% 格式化输出</span></span><span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="va">fprintf</span>(<span class="ss">&#39;Indices of values &gt; %4.2f: \n&#39;</span><span class="op">,</span> <span class="va">limit</span>)<span class="op">;</span></span><span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="va">disp</span>(<span class="va">find</span>(<span class="va">B</span>))</span><span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a><span class="kw">else</span></span><span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a><span class="co">% 打印字符串</span></span><span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="va">disp</span>(<span class="ss">&#39;All values are below the limit.&#39;</span>)</span><span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div><h3 id="for-...-end">for ... end</h3><div class="sourceCode" id="cb11"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">%&#123;</span></span><span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> 变量<span class="op">=</span>初始值<span class="op">:</span>步长<span class="op">:</span>最终值<span class="op">;</span></span><span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    控制语句；</span><span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">%&#125;</span></span><span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="va">k</span> <span class="op">=</span> <span class="fl">10</span><span class="op">;</span></span><span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="va">hilbert</span> <span class="op">=</span> <span class="va">zeros</span>(<span class="va">k</span><span class="op">,</span><span class="va">k</span>)<span class="op">;</span>      <span class="co">% Preallocate matrix</span></span><span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a></span><span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="kw">for</span> <span class="va">m</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">k</span></span><span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> <span class="va">n</span> <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="va">k</span></span><span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="va">hilbert</span>(<span class="va">m</span><span class="op">,</span><span class="va">n</span>) <span class="op">=</span> <span class="fl">1</span><span class="op">/</span>(<span class="va">m</span><span class="op">+</span><span class="va">n</span> <span class="op">-</span><span class="fl">1</span>)<span class="op">;</span></span><span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">end</span></span><span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="va">hilbert</span></span></code></pre></div><h3 id="while-...-end">while ... end</h3><div class="sourceCode" id="cb12"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">%&#123;</span></span><span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> 判断语句</span><span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    控制语句</span><span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">%&#125;</span></span><span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="va">n</span> <span class="op">=</span> <span class="fl">1</span><span class="op">;</span></span><span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="va">nFactorial</span> <span class="op">=</span> <span class="fl">1</span><span class="op">;</span></span><span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="kw">while</span> <span class="va">nFactorial</span> <span class="op">&lt;</span> <span class="fl">1e100</span></span><span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    <span class="va">n</span> <span class="op">=</span> <span class="va">n</span> <span class="op">+</span> <span class="fl">1</span><span class="op">;</span></span><span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>    <span class="va">nFactorial</span> <span class="op">=</span> <span class="va">nFactorial</span> <span class="op">*</span> <span class="va">n</span><span class="op">;</span></span><span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="va">n</span></span><span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co">% 返回所有小于或等于 n 的正整数的乘积</span></span><span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="va">factorial</span>(<span class="fl">69</span>)</span><span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a><span class="va">factorial</span>(<span class="fl">70</span>)</span><span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="co">% 返回 A 的数组元素的乘积。</span></span><span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a><span class="va">prod</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">69</span>)</span><span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="va">prod</span>(<span class="fl">1</span><span class="op">:</span><span class="fl">70</span>)</span></code></pre></div><h3 id="switch-...-case-...-end">switch ... case ... end</h3><div class="sourceCode" id="cb13"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">%&#123;</span></span><span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="kw">switch</span> 变量</span><span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">case</span> 值<span class="fl">1</span><span class="op">:</span></span><span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        控制语句<span class="op">;</span></span><span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">case</span> 值<span class="fl">2</span><span class="op">:</span></span><span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>        控制语句<span class="op">;</span></span><span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">......</span></span><span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">otherwise</span><span class="op">:</span></span><span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>        控制语句<span class="op">;</span></span><span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span><span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">%&#125;</span></span><span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="va">mynumber</span> <span class="op">=</span> <span class="va">input</span>(<span class="ss">&#39;Enter a number:&#39;</span>)<span class="op">;</span></span><span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a></span><span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="kw">switch</span> <span class="va">mynumber</span></span><span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>    <span class="kw">case</span> <span class="op">-</span><span class="fl">1</span></span><span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>        <span class="va">disp</span>(<span class="ss">&#39;negative one&#39;</span>)<span class="op">;</span></span><span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>    <span class="kw">case</span> <span class="fl">0</span></span><span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>        <span class="va">disp</span>(<span class="ss">&#39;zero&#39;</span>)<span class="op">;</span></span><span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">case</span> <span class="fl">1</span></span><span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>        <span class="va">disp</span>(<span class="ss">&#39;positive one&#39;</span>)<span class="op">;</span></span><span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">otherwise</span></span><span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        <span class="va">disp</span>(<span class="ss">&#39;other value&#39;</span>)<span class="op">;</span></span><span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div></div><div class="story post-story"><h2 id="绘图">绘图</h2><h3 id="二维绘图">二维绘图</h3><div class="sourceCode" id="cb14"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="va">x</span> <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">0.01</span><span class="op">:</span><span class="fl">2</span><span class="op">*</span><span class="va">pi</span><span class="op">;</span></span><span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="va">y</span> <span class="op">=</span> <span class="va">sin</span>(<span class="va">x</span>)<span class="op">;</span></span><span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span><span class="co">%绘制一个幕布</span></span><span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="va">plot</span>(<span class="va">x</span><span class="op">,</span> <span class="va">y</span>)<span class="co">%绘制x轴和y轴</span></span><span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">&#39;y = sin(x)&#39;</span>)<span class="co">%标题</span></span><span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">&#39;x&#39;</span>)<span class="co">%x轴标签</span></span><span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">&#39;sin(x)&#39;</span>)<span class="co">%y轴标签</span></span><span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="va">xlim</span>([<span class="fl">0</span> <span class="fl">2</span><span class="op">*</span><span class="va">pi</span>])<span class="co">%限制x轴方向图像长度</span></span><span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span><span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="va">x</span> <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="fl">0.01</span><span class="op">:</span><span class="fl">20</span><span class="op">;</span></span><span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="va">y1</span> <span class="op">=</span> <span class="fl">200</span><span class="op">*</span><span class="va">exp</span>(<span class="op">-</span><span class="fl">0.05</span><span class="op">*</span><span class="va">x</span>)<span class="op">.*</span><span class="va">sin</span>(<span class="va">x</span>)<span class="op">;</span></span><span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="va">y2</span> <span class="op">=</span> <span class="fl">0.8</span><span class="op">*</span><span class="va">exp</span>(<span class="op">-</span><span class="fl">0.5</span><span class="op">*</span><span class="va">x</span>)<span class="op">.*</span><span class="va">sin</span>(<span class="fl">10</span><span class="op">*</span><span class="va">x</span>)<span class="op">;</span></span><span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="va">figure</span></span><span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">%共用一个x坐标在y上有不同的取值</span></span><span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>[<span class="va">AX</span><span class="op">,</span><span class="va">H1</span><span class="op">,</span><span class="va">H2</span>] <span class="op">=</span> <span class="va">plotyy</span>(<span class="va">x</span><span class="op">,</span><span class="va">y1</span><span class="op">,</span><span class="va">x</span><span class="op">,</span><span class="va">y2</span><span class="op">,</span><span class="ss">&#39;plot&#39;</span>)<span class="op">;</span></span><span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">%doc set</span></span><span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="va">set</span>(<span class="va">get</span>(<span class="va">AX</span>(<span class="fl">1</span>)<span class="op">,</span><span class="ss">&#39;Ylabel&#39;</span>)<span class="op">,</span><span class="ss">&#39;String&#39;</span><span class="op">,</span><span class="ss">&#39;Slow Decay&#39;</span>)</span><span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="va">set</span>(<span class="va">get</span>(<span class="va">AX</span>(<span class="fl">2</span>)<span class="op">,</span><span class="ss">&#39;Ylabel&#39;</span>)<span class="op">,</span><span class="ss">&#39;String&#39;</span><span class="op">,</span><span class="ss">&#39;Fast Decay&#39;</span>)</span><span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">&#39;Time (\musec)&#39;</span>)</span><span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="va">title</span>(<span class="ss">&#39;Multiple Decay Rates&#39;</span>)</span><span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="va">set</span>(<span class="va">H1</span><span class="op">,</span><span class="ss">&#39;LineStyle&#39;</span><span class="op">,</span><span class="ss">&#39;--&#39;</span>)</span><span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="va">set</span>(<span class="va">H2</span><span class="op">,</span><span class="ss">&#39;LineStyle&#39;</span><span class="op">,</span><span class="ss">&#39;:&#39;</span>)</span></code></pre></div><h3 id="三维绘图">三维绘图</h3><div class="sourceCode" id="cb15"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="va">t</span> <span class="op">=</span> <span class="fl">0</span><span class="op">:</span><span class="va">pi</span><span class="op">/</span><span class="fl">50</span><span class="op">:</span><span class="fl">10</span><span class="op">*</span><span class="va">pi</span><span class="op">;</span></span><span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="va">plot3</span>(<span class="va">sin</span>(<span class="va">t</span>)<span class="op">,</span><span class="va">cos</span>(<span class="va">t</span>)<span class="op">,</span><span class="va">t</span>)</span><span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="va">xlabel</span>(<span class="ss">&#39;sin(t)&#39;</span>)</span><span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="va">ylabel</span>(<span class="ss">&#39;cos(t)&#39;</span>)</span><span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="va">zlabel</span>(<span class="ss">&#39;t&#39;</span>)</span><span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="va">grid</span> <span class="va">on</span> <span class="co">%添加网格线</span></span><span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="va">axis</span> <span class="va">square</span> <span class="co">%图像限制为正方形</span></span></code></pre></div><h3 id="子图绘制">子图绘制</h3><p><img src="https://bu.dusays.com/2024/01/19/65aa4801a4b66.png" class="lazyload" data-srcset="https://bu.dusays.com/2024/01/19/65aa4801a4b66.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p><h3 id="图片保存与导出">图片保存与导出</h3><div class="sourceCode" id="cb16"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co">% (1) Edit → Copy Figure</span></span><span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="co">% (2) Toolbar → Save</span></span><span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">% (3) print(&#39;-depsc&#39;,&#39;-tiff&#39;,&#39;-r300&#39;,&#39;picture1&#39;)</span></span><span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co">% (4) File → Export Setup</span></span></code></pre></div></div><div class="story post-story"><h2 id="文件导入">文件导入</h2><ol type="1"><li>mat格式</li></ol><div class="sourceCode" id="cb17"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="va">save</span> <span class="va">data</span>.<span class="va">mat</span> <span class="va">x</span> <span class="va">y1</span> <span class="va">y2</span></span><span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="va">clear</span> <span class="va">all</span></span><span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="va">load</span> <span class="va">data</span>.<span class="va">mat</span></span></code></pre></div><ol start="2" type="1"><li>txt格式</li></ol><div class="sourceCode" id="cb18"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="va">M</span> <span class="op">=</span> <span class="va">importdata</span>(<span class="ss">&#39;myfile.txt&#39;</span>)<span class="op">;</span></span><span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span><span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="va">S</span> <span class="op">=</span> <span class="va">M</span>.<span class="va">data</span><span class="op">;</span></span><span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="va">save</span> <span class="ss">&#39;data.txt&#39;</span> <span class="va">S</span> <span class="op">-</span><span class="va">ascii</span></span><span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="va">T</span> <span class="op">=</span> <span class="va">load</span>(<span class="ss">&#39;data.txt&#39;</span>)<span class="op">;</span></span><span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span><span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="va">isequal</span>(<span class="va">S</span><span class="op">,</span> <span class="va">T</span>)</span></code></pre></div><ol start="3" type="1"><li>xls格式</li></ol><div class="sourceCode" id="cb19"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="va">xlswrite</span>(<span class="ss">&#39;data.xls&#39;</span><span class="op">,</span><span class="va">S</span>)</span><span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="va">W</span> <span class="op">=</span> <span class="va">xlsread</span>(<span class="ss">&#39;data.xls&#39;</span>)<span class="op">;</span></span><span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="va">isequal</span>(<span class="va">S</span><span class="op">,</span> <span class="va">W</span>)</span><span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span><span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="va">xlswrite</span>(<span class="ss">&#39;data.xlsx&#39;</span><span class="op">,</span><span class="va">S</span>)</span><span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="va">U</span> <span class="op">=</span> <span class="va">xlsread</span>(<span class="ss">&#39;data.xlsx&#39;</span>)<span class="op">;</span></span><span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="va">isequal</span>(<span class="va">S</span><span class="op">,</span> <span class="va">U</span>)</span></code></pre></div><ol start="4" type="1"><li>csv格式</li></ol><div class="sourceCode" id="cb20"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="va">csvwrite</span>(<span class="ss">&#39;data.csv&#39;</span><span class="op">,</span><span class="va">S</span>)</span><span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="va">V</span> <span class="op">=</span> <span class="va">csvread</span>(<span class="ss">&#39;data.csv&#39;</span>)<span class="op">;</span></span><span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="va">isequal</span>(<span class="va">S</span><span class="op">,</span> <span class="va">V</span>)</span></code></pre></div></div><div class="story post-story"><h2 id="函数">函数</h2><div class="sourceCode" id="cb21"><pre class="sourceCode matlab"><code class="sourceCode matlab"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="kw">function</span> <span class="va">result</span> <span class="op">=</span> <span class="va">myFunction</span>(<span class="va">input1</span><span class="op">,</span> <span class="va">input2</span>)</span><span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 在这里编写函数体的代码</span></span><span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    </span><span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 对输入参数进行处理或计算</span></span><span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="va">processedInput</span> <span class="op">=</span> <span class="va">input1</span> <span class="op">+</span> <span class="va">input2</span><span class="op">;</span></span><span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>    </span><span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">% 返回结果</span></span><span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    <span class="va">result</span> <span class="op">=</span> <span class="va">processedInput</span> <span class="op">*</span> <span class="fl">2</span><span class="op">;</span></span><span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;清空环境变量及命令&quot;&gt;清空环境变量及命令&lt;/h2&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb1&quot;&gt;&lt;pre class=&quot;sourceCode matlab&quot;&gt;&lt;code class=</summary>
      
    
    
    
    <category term="学习记录" scheme="https://blog.bingw.top/categories/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="MATLAB" scheme="https://blog.bingw.top/tags/MATLAB/"/>
    
  </entry>
  
  <entry>
    <title>在go语言中使用mysql</title>
    <link href="https://blog.bingw.top/122023a4d574f1/"/>
    <id>https://blog.bingw.top/122023a4d574f1/</id>
    <published>2023-12-28T10:12:44.000Z</published>
    <updated>2024-01-19T11:49:19.000Z</updated>
    
    <content type="html"><![CDATA[<h3 id="安装mysql驱动">安装mysql驱动</h3><div class="sourceCode" id="cb1"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">go</span> get <span class="op">-</span>u github<span class="op">.</span>com<span class="op">/</span><span class="kw">go</span><span class="op">-</span>sql<span class="op">-</span>driver<span class="op">/</span>mysql</span></code></pre></div><h3 id="导入相关库">导入相关库</h3><div class="sourceCode" id="cb2"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="op">(</span></span><span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;database/sql&quot;</span></span><span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    _ <span class="st">&quot;github.com/go-sql-driver/mysql&quot;</span></span><span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span></code></pre></div><h3 id="链接数据库">链接数据库</h3><div class="sourceCode" id="cb3"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> DbConfig <span class="kw">struct</span> <span class="op">&#123;</span></span><span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>    UserName <span class="dt">string</span> <span class="st">`name:&quot;用户名&quot;`</span></span><span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    Password <span class="dt">string</span> <span class="st">`name:&quot;密码&quot;`</span></span><span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    Host     <span class="dt">string</span> <span class="st">`name:&quot;ip&quot;`</span></span><span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    Port     <span class="dt">int</span>    <span class="st">`name:&quot;端口&quot;`</span></span><span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    db       <span class="op">*</span>sql<span class="op">.</span>DB</span><span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span><span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co">// NewDbConfig 初始化数据库配置</span></span><span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> NewDbConfig<span class="op">(</span>username <span class="dt">string</span><span class="op">,</span> pwd <span class="dt">string</span><span class="op">,</span> host <span class="dt">string</span><span class="op">,</span> port <span class="dt">int</span><span class="op">)</span> <span class="op">*</span>DbConfig <span class="op">&#123;</span></span><span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="op">&amp;</span>DbConfig<span class="op">&#123;</span>UserName<span class="op">:</span> username<span class="op">,</span> Password<span class="op">:</span> pwd<span class="op">,</span> Host<span class="op">:</span> host<span class="op">,</span> Port<span class="op">:</span> port<span class="op">&#125;</span></span><span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a></span><span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="co">// DbConnect 数据库连接</span></span><span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> DbConnect<span class="op">(</span>database <span class="dt">string</span><span class="op">)</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>    str <span class="op">:=</span> fmt<span class="op">.</span>Sprintf<span class="op">(</span><span class="st">&quot;%s:%s@tcp(%s:%d)/%s?charset=utf8mb4&quot;</span><span class="op">,</span></span><span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>        dbConfig<span class="op">.</span>UserName<span class="op">,</span> dbConfig<span class="op">.</span>Password<span class="op">,</span> dbConfig<span class="op">.</span>Host<span class="op">,</span> dbConfig<span class="op">.</span>Port<span class="op">,</span> database<span class="op">)</span></span><span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>    db<span class="op">,</span> err <span class="op">:=</span> sql<span class="op">.</span>Open<span class="op">(</span><span class="st">&quot;mysql&quot;</span><span class="op">,</span> str<span class="op">)</span></span><span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>    dbConfig<span class="op">.</span>db <span class="op">=</span> db</span><span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> err</span><span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div><h3 id="创建数据库表users">创建数据库表users</h3><div class="sourceCode" id="cb4"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> CreateUserTable<span class="op">()</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    _<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span><span class="st">`CREATE TABLE IF NOT EXISTS users (</span></span><span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="st">        id int(11) NOT NULL AUTO_INCREMENT,</span></span><span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="st">        name varchar(255) NOT NULL,</span></span><span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="st">        password varchar(255) NOT NULL,</span></span><span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="st">        PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4`</span><span class="op">)</span></span><span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> err</span><span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="ot">nil</span></span><span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div><h3 id="插入数据">插入数据</h3><div class="sourceCode" id="cb5"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> InsertUser<span class="op">(</span>user <span class="op">*</span>User<span class="op">)</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;INSERT INTO users (name, password) VALUES (?, ?)&quot;</span></span><span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    _<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span>query<span class="op">,</span> user<span class="op">.</span>name<span class="op">,</span> user<span class="op">.</span>password<span class="op">)</span></span><span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> err</span><span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">(</span><span class="st">&quot;insert user success:&quot;</span><span class="op">,</span> user<span class="op">)</span></span><span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="ot">nil</span></span><span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span>    </span></code></pre></div><h3 id="查询数据">查询数据</h3><div class="sourceCode" id="cb6"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> SelectUsers<span class="op">()</span> <span class="op">([]</span>User<span class="op">,</span> <span class="dt">error</span><span class="op">)</span> <span class="op">&#123;</span></span><span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;SELECT * FROM users&quot;</span></span><span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    rows<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Query<span class="op">(</span>query<span class="op">)</span></span><span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="ot">nil</span><span class="op">,</span> err</span><span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>    users <span class="op">:=</span> <span class="bu">make</span><span class="op">([]</span>User<span class="op">,</span> <span class="dv">0</span><span class="op">)</span></span><span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> user User</span><span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> rows<span class="op">.</span>Next<span class="op">()</span> <span class="op">&#123;</span></span><span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>        err <span class="op">:=</span> rows<span class="op">.</span>Scan<span class="op">(&amp;</span>user<span class="op">.</span>ID<span class="op">,</span> <span class="op">&amp;</span>user<span class="op">.</span>Name<span class="op">,</span> <span class="op">&amp;</span>user<span class="op">.</span>Password<span class="op">)</span></span><span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> <span class="ot">nil</span><span class="op">,</span> err</span><span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">&#125;</span></span><span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>        users <span class="op">=</span> <span class="bu">append</span><span class="op">(</span>users<span class="op">,</span> user<span class="op">)</span></span><span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> users<span class="op">,</span> <span class="ot">nil</span></span><span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div><h3 id="更新数据">更新数据</h3><div class="sourceCode" id="cb7"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> UpdateUser<span class="op">(</span>u User<span class="op">)</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;UPDATE users SET name = ?, password = ? WHERE id = ?&quot;</span></span><span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    _<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span>query<span class="op">,</span> u<span class="op">.</span>Name<span class="op">,</span> u<span class="op">.</span>Password<span class="op">,</span> u<span class="op">.</span>ID<span class="op">)</span></span><span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> err</span><span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div><h3 id="删除数据">删除数据</h3><div class="sourceCode" id="cb8"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> DeleteUser<span class="op">(</span>id <span class="dt">int</span><span class="op">)</span> <span class="op">(</span><span class="dt">int32</span><span class="op">,</span> <span class="dt">error</span><span class="op">)</span> <span class="op">&#123;</span></span><span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;DELETE FROM users WHERE id =?&quot;</span></span><span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    result<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span>query<span class="op">,</span> id<span class="op">)</span></span><span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    affected<span class="op">,</span> err <span class="op">:=</span> result<span class="op">.</span>RowsAffected<span class="op">()</span></span><span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="dv">0</span><span class="op">,</span> err</span><span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">int32</span><span class="op">(</span>affected<span class="op">),</span> <span class="ot">nil</span></span><span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div><h3 id="完整代码">完整代码</h3><div class="sourceCode" id="cb9"><pre class="sourceCode go"><code class="sourceCode go"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">package</span> main</span><span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="op">(</span></span><span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;database/sql&quot;</span></span><span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;fmt&quot;</span></span><span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    _ <span class="st">&quot;github.com/go-sql-driver/mysql&quot;</span></span><span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="op">)</span></span><span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> DbConfig <span class="kw">struct</span> <span class="op">&#123;</span></span><span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    UserName <span class="dt">string</span> <span class="st">`name:&quot;用户名&quot;`</span></span><span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>    Password <span class="dt">string</span> <span class="st">`name:&quot;密码&quot;`</span></span><span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>    Host     <span class="dt">string</span> <span class="st">`name:&quot;ip&quot;`</span></span><span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>    Port     <span class="dt">int</span>    <span class="st">`name:&quot;端口&quot;`</span></span><span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    db       <span class="op">*</span>sql<span class="op">.</span>DB</span><span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="kw">type</span> User <span class="kw">struct</span> <span class="op">&#123;</span></span><span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>    ID       <span class="dt">int</span></span><span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>    Name     <span class="dt">string</span></span><span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>    Password <span class="dt">string</span></span><span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">// NewDbConfig 初始化数据库配置</span></span><span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> NewDbConfig<span class="op">(</span>username <span class="dt">string</span><span class="op">,</span> pwd <span class="dt">string</span><span class="op">,</span> host <span class="dt">string</span><span class="op">,</span> port <span class="dt">int</span><span class="op">)</span> <span class="op">*</span>DbConfig <span class="op">&#123;</span></span><span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="op">&amp;</span>DbConfig<span class="op">&#123;</span>UserName<span class="op">:</span> username<span class="op">,</span> Password<span class="op">:</span> pwd<span class="op">,</span> Host<span class="op">:</span> host<span class="op">,</span> Port<span class="op">:</span> port<span class="op">&#125;</span></span><span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a><span class="co">// DbConnect 数据库连接</span></span><span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> DbConnect<span class="op">(</span>database <span class="dt">string</span><span class="op">)</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>    str <span class="op">:=</span> fmt<span class="op">.</span>Sprintf<span class="op">(</span><span class="st">&quot;%s:%s@tcp(%s:%d)/%s?charset=utf8mb4&quot;</span><span class="op">,</span></span><span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>        dbConfig<span class="op">.</span>UserName<span class="op">,</span> dbConfig<span class="op">.</span>Password<span class="op">,</span> dbConfig<span class="op">.</span>Host<span class="op">,</span> dbConfig<span class="op">.</span>Port<span class="op">,</span> database<span class="op">)</span></span><span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>    db<span class="op">,</span> err <span class="op">:=</span> sql<span class="op">.</span>Open<span class="op">(</span><span class="st">&quot;mysql&quot;</span><span class="op">,</span> str<span class="op">)</span></span><span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>    dbConfig<span class="op">.</span>db <span class="op">=</span> db</span><span id="cb9-33"><a href="#cb9-33" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> err</span><span id="cb9-34"><a href="#cb9-34" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-35"><a href="#cb9-35" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-36"><a href="#cb9-36" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> CreateUserTable<span class="op">()</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb9-37"><a href="#cb9-37" aria-hidden="true" tabindex="-1"></a>    _<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span><span class="st">`CREATE TABLE IF NOT EXISTS users (</span></span><span id="cb9-38"><a href="#cb9-38" aria-hidden="true" tabindex="-1"></a><span class="st">        id int(11) NOT NULL AUTO_INCREMENT,</span></span><span id="cb9-39"><a href="#cb9-39" aria-hidden="true" tabindex="-1"></a><span class="st">        name varchar(255) NOT NULL,</span></span><span id="cb9-40"><a href="#cb9-40" aria-hidden="true" tabindex="-1"></a><span class="st">        password varchar(255) NOT NULL,</span></span><span id="cb9-41"><a href="#cb9-41" aria-hidden="true" tabindex="-1"></a><span class="st">        PRIMARY KEY (id)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4`</span><span class="op">)</span></span><span id="cb9-42"><a href="#cb9-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-43"><a href="#cb9-43" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> err</span><span id="cb9-44"><a href="#cb9-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-45"><a href="#cb9-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="ot">nil</span></span><span id="cb9-46"><a href="#cb9-46" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-47"><a href="#cb9-47" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-48"><a href="#cb9-48" aria-hidden="true" tabindex="-1"></a><span class="co">// InsertUser 添加用户</span></span><span id="cb9-49"><a href="#cb9-49" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> InsertUser<span class="op">(</span>user <span class="op">*</span>User<span class="op">)</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb9-50"><a href="#cb9-50" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;INSERT INTO users (name, password) VALUES (?, ?)&quot;</span></span><span id="cb9-51"><a href="#cb9-51" aria-hidden="true" tabindex="-1"></a>    _<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span>query<span class="op">,</span> user<span class="op">.</span>Name<span class="op">,</span> user<span class="op">.</span>Password<span class="op">)</span></span><span id="cb9-52"><a href="#cb9-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-53"><a href="#cb9-53" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> err</span><span id="cb9-54"><a href="#cb9-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-55"><a href="#cb9-55" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">(</span><span class="st">&quot;insert user success:&quot;</span><span class="op">,</span> user<span class="op">)</span></span><span id="cb9-56"><a href="#cb9-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="ot">nil</span></span><span id="cb9-57"><a href="#cb9-57" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-58"><a href="#cb9-58" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-59"><a href="#cb9-59" aria-hidden="true" tabindex="-1"></a><span class="co">// SelectUsers 查询所有用户</span></span><span id="cb9-60"><a href="#cb9-60" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> SelectUsers<span class="op">()</span> <span class="op">([]</span>User<span class="op">,</span> <span class="dt">error</span><span class="op">)</span> <span class="op">&#123;</span></span><span id="cb9-61"><a href="#cb9-61" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;SELECT * FROM users&quot;</span></span><span id="cb9-62"><a href="#cb9-62" aria-hidden="true" tabindex="-1"></a>    rows<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Query<span class="op">(</span>query<span class="op">)</span></span><span id="cb9-63"><a href="#cb9-63" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-64"><a href="#cb9-64" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="ot">nil</span><span class="op">,</span> err</span><span id="cb9-65"><a href="#cb9-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-66"><a href="#cb9-66" aria-hidden="true" tabindex="-1"></a>    users <span class="op">:=</span> <span class="bu">make</span><span class="op">([]</span>User<span class="op">,</span> <span class="dv">0</span><span class="op">)</span></span><span id="cb9-67"><a href="#cb9-67" aria-hidden="true" tabindex="-1"></a>    <span class="kw">var</span> user User</span><span id="cb9-68"><a href="#cb9-68" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> rows<span class="op">.</span>Next<span class="op">()</span> <span class="op">&#123;</span></span><span id="cb9-69"><a href="#cb9-69" aria-hidden="true" tabindex="-1"></a>        err <span class="op">:=</span> rows<span class="op">.</span>Scan<span class="op">(&amp;</span>user<span class="op">.</span>ID<span class="op">,</span> <span class="op">&amp;</span>user<span class="op">.</span>Name<span class="op">,</span> <span class="op">&amp;</span>user<span class="op">.</span>Password<span class="op">)</span></span><span id="cb9-70"><a href="#cb9-70" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-71"><a href="#cb9-71" aria-hidden="true" tabindex="-1"></a>            <span class="kw">return</span> <span class="ot">nil</span><span class="op">,</span> err</span><span id="cb9-72"><a href="#cb9-72" aria-hidden="true" tabindex="-1"></a>        <span class="op">&#125;</span></span><span id="cb9-73"><a href="#cb9-73" aria-hidden="true" tabindex="-1"></a>        users <span class="op">=</span> <span class="bu">append</span><span class="op">(</span>users<span class="op">,</span> user<span class="op">)</span></span><span id="cb9-74"><a href="#cb9-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-75"><a href="#cb9-75" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> users<span class="op">,</span> <span class="ot">nil</span></span><span id="cb9-76"><a href="#cb9-76" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-77"><a href="#cb9-77" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> UpdateUser<span class="op">(</span>u User<span class="op">)</span> <span class="dt">error</span> <span class="op">&#123;</span></span><span id="cb9-78"><a href="#cb9-78" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;UPDATE users SET name = ?, password = ? WHERE id = ?&quot;</span></span><span id="cb9-79"><a href="#cb9-79" aria-hidden="true" tabindex="-1"></a>    _<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span>query<span class="op">,</span> u<span class="op">.</span>Name<span class="op">,</span> u<span class="op">.</span>Password<span class="op">,</span> u<span class="op">.</span>ID<span class="op">)</span></span><span id="cb9-80"><a href="#cb9-80" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> err</span><span id="cb9-81"><a href="#cb9-81" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-82"><a href="#cb9-82" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> <span class="op">(</span>dbConfig <span class="op">*</span>DbConfig<span class="op">)</span> DeleteUser<span class="op">(</span>id <span class="dt">int</span><span class="op">)</span> <span class="op">(</span><span class="dt">int32</span><span class="op">,</span> <span class="dt">error</span><span class="op">)</span> <span class="op">&#123;</span></span><span id="cb9-83"><a href="#cb9-83" aria-hidden="true" tabindex="-1"></a>    query <span class="op">:=</span> <span class="st">&quot;DELETE FROM users WHERE id =?&quot;</span></span><span id="cb9-84"><a href="#cb9-84" aria-hidden="true" tabindex="-1"></a>    result<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>db<span class="op">.</span>Exec<span class="op">(</span>query<span class="op">,</span> id<span class="op">)</span></span><span id="cb9-85"><a href="#cb9-85" aria-hidden="true" tabindex="-1"></a>    affected<span class="op">,</span> err <span class="op">:=</span> result<span class="op">.</span>RowsAffected<span class="op">()</span></span><span id="cb9-86"><a href="#cb9-86" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-87"><a href="#cb9-87" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span> <span class="dv">0</span><span class="op">,</span> err</span><span id="cb9-88"><a href="#cb9-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-89"><a href="#cb9-89" aria-hidden="true" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">int32</span><span class="op">(</span>affected<span class="op">),</span> <span class="ot">nil</span></span><span id="cb9-90"><a href="#cb9-90" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span><span id="cb9-91"><a href="#cb9-91" aria-hidden="true" tabindex="-1"></a></span><span id="cb9-92"><a href="#cb9-92" aria-hidden="true" tabindex="-1"></a><span class="kw">func</span> main<span class="op">()</span> <span class="op">&#123;</span></span><span id="cb9-93"><a href="#cb9-93" aria-hidden="true" tabindex="-1"></a>    dbConfig <span class="op">:=</span> NewDbConfig<span class="op">(</span><span class="st">&quot;bing&quot;</span><span class="op">,</span> <span class="st">&quot;@Wb299122&quot;</span><span class="op">,</span> <span class="st">&quot;127.0.0.1&quot;</span><span class="op">,</span> <span class="dv">3306</span><span class="op">)</span></span><span id="cb9-94"><a href="#cb9-94" aria-hidden="true" tabindex="-1"></a>    err <span class="op">:=</span> dbConfig<span class="op">.</span>DbConnect<span class="op">(</span><span class="st">&quot;go_study&quot;</span><span class="op">)</span></span><span id="cb9-95"><a href="#cb9-95" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-96"><a href="#cb9-96" aria-hidden="true" tabindex="-1"></a>        fmt<span class="op">.</span>Println<span class="op">(</span>err<span class="op">)</span></span><span id="cb9-97"><a href="#cb9-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-98"><a href="#cb9-98" aria-hidden="true" tabindex="-1"></a>    <span class="kw">defer</span> <span class="kw">func</span><span class="op">(</span>db <span class="op">*</span>sql<span class="op">.</span>DB<span class="op">)</span> <span class="op">&#123;</span></span><span id="cb9-99"><a href="#cb9-99" aria-hidden="true" tabindex="-1"></a>        err <span class="op">:=</span> db<span class="op">.</span>Close<span class="op">()</span></span><span id="cb9-100"><a href="#cb9-100" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-101"><a href="#cb9-101" aria-hidden="true" tabindex="-1"></a>            fmt<span class="op">.</span>Println<span class="op">(</span><span class="st">&quot;db close err:&quot;</span><span class="op">,</span> err<span class="op">)</span></span><span id="cb9-102"><a href="#cb9-102" aria-hidden="true" tabindex="-1"></a>        <span class="op">&#125;</span></span><span id="cb9-103"><a href="#cb9-103" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;(</span>dbConfig<span class="op">.</span>db<span class="op">)</span></span><span id="cb9-104"><a href="#cb9-104" aria-hidden="true" tabindex="-1"></a>    err <span class="op">=</span> dbConfig<span class="op">.</span>CreateUserTable<span class="op">()</span></span><span id="cb9-105"><a href="#cb9-105" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-106"><a href="#cb9-106" aria-hidden="true" tabindex="-1"></a>        fmt<span class="op">.</span>Println<span class="op">(</span><span class="st">&quot;create user table error:&quot;</span><span class="op">,</span> err<span class="op">)</span></span><span id="cb9-107"><a href="#cb9-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-108"><a href="#cb9-108" aria-hidden="true" tabindex="-1"></a>    <span class="kw">for</span> i <span class="op">:=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++</span> <span class="op">&#123;</span></span><span id="cb9-109"><a href="#cb9-109" aria-hidden="true" tabindex="-1"></a>        name <span class="op">:=</span> fmt<span class="op">.</span>Sprintf<span class="op">(</span><span class="st">&quot;%s%d&quot;</span><span class="op">,</span> <span class="st">&quot;bing&quot;</span><span class="op">,</span> i<span class="op">)</span></span><span id="cb9-110"><a href="#cb9-110" aria-hidden="true" tabindex="-1"></a>        pwd <span class="op">:=</span> fmt<span class="op">.</span>Sprintf<span class="op">(</span><span class="st">&quot;%s%d&quot;</span><span class="op">,</span> <span class="st">&quot;pwd&quot;</span><span class="op">,</span> i<span class="op">)</span></span><span id="cb9-111"><a href="#cb9-111" aria-hidden="true" tabindex="-1"></a>        user <span class="op">:=</span> <span class="op">&amp;</span>User<span class="op">&#123;</span></span><span id="cb9-112"><a href="#cb9-112" aria-hidden="true" tabindex="-1"></a>            Name<span class="op">:</span>     name<span class="op">,</span></span><span id="cb9-113"><a href="#cb9-113" aria-hidden="true" tabindex="-1"></a>            Password<span class="op">:</span> pwd<span class="op">,</span></span><span id="cb9-114"><a href="#cb9-114" aria-hidden="true" tabindex="-1"></a>        <span class="op">&#125;</span></span><span id="cb9-115"><a href="#cb9-115" aria-hidden="true" tabindex="-1"></a>        err <span class="op">=</span> dbConfig<span class="op">.</span>InsertUser<span class="op">(</span>user<span class="op">)</span></span><span id="cb9-116"><a href="#cb9-116" aria-hidden="true" tabindex="-1"></a>        <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-117"><a href="#cb9-117" aria-hidden="true" tabindex="-1"></a>            fmt<span class="op">.</span>Println<span class="op">(</span><span class="st">&quot;insert user error:&quot;</span><span class="op">,</span> err<span class="op">)</span></span><span id="cb9-118"><a href="#cb9-118" aria-hidden="true" tabindex="-1"></a>        <span class="op">&#125;</span></span><span id="cb9-119"><a href="#cb9-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-120"><a href="#cb9-120" aria-hidden="true" tabindex="-1"></a>    users<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>SelectUsers<span class="op">()</span></span><span id="cb9-121"><a href="#cb9-121" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-122"><a href="#cb9-122" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span><span id="cb9-123"><a href="#cb9-123" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-124"><a href="#cb9-124" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>users<span class="op">)</span></span><span id="cb9-125"><a href="#cb9-125" aria-hidden="true" tabindex="-1"></a>    err <span class="op">=</span> dbConfig<span class="op">.</span>UpdateUser<span class="op">(</span>User<span class="op">&#123;</span></span><span id="cb9-126"><a href="#cb9-126" aria-hidden="true" tabindex="-1"></a>        ID<span class="op">:</span>       <span class="dv">1</span><span class="op">,</span></span><span id="cb9-127"><a href="#cb9-127" aria-hidden="true" tabindex="-1"></a>        Name<span class="op">:</span>     <span class="st">&quot;hello&quot;</span><span class="op">,</span></span><span id="cb9-128"><a href="#cb9-128" aria-hidden="true" tabindex="-1"></a>        Password<span class="op">:</span> <span class="st">&quot;world&quot;</span><span class="op">,</span></span><span id="cb9-129"><a href="#cb9-129" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;)</span></span><span id="cb9-130"><a href="#cb9-130" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-131"><a href="#cb9-131" aria-hidden="true" tabindex="-1"></a>        fmt<span class="op">.</span>Println<span class="op">(</span><span class="st">&quot;update user error:&quot;</span><span class="op">,</span> err<span class="op">)</span></span><span id="cb9-132"><a href="#cb9-132" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-133"><a href="#cb9-133" aria-hidden="true" tabindex="-1"></a>    count<span class="op">,</span> err <span class="op">:=</span> dbConfig<span class="op">.</span>DeleteUser<span class="op">(</span><span class="dv">2</span><span class="op">)</span></span><span id="cb9-134"><a href="#cb9-134" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> err <span class="op">!=</span> <span class="ot">nil</span> <span class="op">&#123;</span></span><span id="cb9-135"><a href="#cb9-135" aria-hidden="true" tabindex="-1"></a>        <span class="kw">return</span></span><span id="cb9-136"><a href="#cb9-136" aria-hidden="true" tabindex="-1"></a>    <span class="op">&#125;</span></span><span id="cb9-137"><a href="#cb9-137" aria-hidden="true" tabindex="-1"></a>    fmt<span class="op">.</span>Println<span class="op">(</span>count<span class="op">)</span></span><span id="cb9-138"><a href="#cb9-138" aria-hidden="true" tabindex="-1"></a><span class="op">&#125;</span></span></code></pre></div>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;安装mysql驱动&quot;&gt;安装mysql驱动&lt;/h3&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb1&quot;&gt;&lt;pre class=&quot;sourceCode go&quot;&gt;&lt;code class=&quot;sourceCode go&quot;&gt;&lt;span id=&quot;cb1-1&quot;&gt;&lt;</summary>
      
    
    
    
    <category term="学习记录" scheme="https://blog.bingw.top/categories/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="Go" scheme="https://blog.bingw.top/tags/Go/"/>
    
    <category term="MYSQL" scheme="https://blog.bingw.top/tags/MYSQL/"/>
    
  </entry>
  
  <entry>
    <title>Week2 20231225-20240101</title>
    <link href="https://blog.bingw.top/162023cfec5771/"/>
    <id>https://blog.bingw.top/162023cfec5771/</id>
    <published>2023-12-25T09:16:03.000Z</published>
    <updated>2024-01-19T11:49:19.000Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="section">2023.12.30</h2><ol type="1"><li>摸鱼划水</li></ol></div><div class="story post-story"><h2 id="section-1">2023.12.29</h2><ol type="1"><li>论文选择</li></ol></div><div class="story post-story"><h2 id="section-2">2023.12.28</h2><ol type="1"><li>在go语言中使用mysql测试案例</li><li>二叉树的下一个节点(中序)</li><li>2018随机过程真题1-2</li><li>Dynamics of solitons in NOLM based all-normal dispersion yb-doped mode-locked fiber laser 除模拟部分</li></ol></div><div class="story post-story"><h2 id="section-3">2023.12.27</h2><ol type="1"><li>B站《8小时转职Golang工程师》p46-p52 完结撒花~</li><li>二叉树的最大宽度</li><li>2023随机过程真题</li></ol></div><div class="story post-story"><h2 id="section-4">2023.12.26</h2><ol type="1"><li>上课-数字图像处理：原来不是最后一节课，好家伙老师甚至连考试时间都不知道</li><li>B站《8小时转职Golang工程师》p41-p45</li><li>汇报：呃呃总结白看三周论文</li></ol></div><div class="story post-story"><h2 id="section-5">2023.12.25</h2><ol type="1"><li>B站《8小时转职Golang工程师》p35-p40</li><li>帮LY修改简历</li><li>Leetcode297 二叉树的序列号与反序列化-层序遍历</li><li>上课：论文写作指导</li></ol></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;section&quot;&gt;2023.12.30&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;摸鱼划水&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=</summary>
      
    
    
    
    <category term="日常生活" scheme="https://blog.bingw.top/categories/%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>Week1 20231218-20231224</title>
    <link href="https://blog.bingw.top/4920234a20af48/"/>
    <id>https://blog.bingw.top/4920234a20af48/</id>
    <published>2023-12-18T09:49:59.000Z</published>
    <updated>2024-01-19T11:49:19.000Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="section">2023.12.24</h2><ol type="1"><li>2024数学真题选择题</li><li>自适应信号处理(B站卡尔曼滤波器p3-p6)</li><li>Leetcode297 二叉树的序列号与反序列化-前序遍历</li><li>B站《8小时转职Golang工程师》p33-p34</li><li>小惊喜-圣诞小蛋糕</li></ol></div><div class="story post-story"><h2 id="section-1">2023.12.23</h2><ol type="1"><li>二叉树的层序遍历</li><li>Leetcode237 删除链表中的节点</li><li>自适应信号处理(B站卡尔曼滤波器p1-p2)</li><li>B站《8小时转职Golang工程师》p26-p32</li><li>瞎折腾Blog</li></ol></div><div class="story post-story"><h2 id="section-2">2023.12.22</h2><ol type="1"><li>牛客网摸鱼看就业情况</li><li>知乎摸鱼看就业方向</li><li>二叉树的非递归前中后遍历</li><li>B站《8小时转职Golang工程师》p15-p25</li></ol></div><div class="story post-story"><h2 id="section-3">2023.12.21</h2><ol type="1"><li>装软件配环境</li><li>二叉树的递归遍历</li><li>自适应信号处理与现代谱估计上课</li><li>B站《8小时转职Golang工程师》p1-p14</li></ol></div><div class="story post-story"><h2 id="section-4">2023.12.20</h2><ol type="1"><li>有环交叉链表</li><li>两台电脑重装系统</li><li>Mint系统探究</li></ol></div><div class="story post-story"><h2 id="section-5">2023.12.19</h2><ol type="1"><li>数字图像处理翘课被抓啦</li><li>健身房2h</li><li>Leetcode 相交链表</li><li>阅读完Recent progress in ultrafast lasers based on 2D materials as a saturable absorber</li><li>了解组内科研情况</li></ol><h1 id="section-6">2023.12.18</h1><ol type="1"><li>完成自适应信号处理与现代谱估计实验报告</li><li>Leetcode 环形链表II</li><li>随机过程2.1学习</li><li>挑选论文</li></ol><ul><li>Recent progress in ultrafast lasers based on 2D materials as a saturable absorber</li><li>Influence of gain fiber on dissipative soliton pairs in passively mode-locked fiber laser based on BP as a saturable absorber</li><li>Dynamic evolution of the dissipative soliton in passively mode-locked fiber laser based on black phosphorus as a new saturable absorber</li><li>Recent progress in ultrafast lasers based on 2D materials as a saturable absorber</li><li>Optoelectronic characteristics and application of black phosphorus and its analogs</li></ul><ol start="5" type="1"><li>看Recent progress in ultrafast lasers based on 2D materials as a saturable absorber的introduction和Fabrication method</li><li>上课：论文写作指导</li><li>禧相逢烧烤</li></ol></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;section&quot;&gt;2023.12.24&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;2024数学真题选择题&lt;/li&gt;
&lt;li&gt;自适应信号处理(B站卡尔曼滤波器p3-p6)&lt;/li&gt;
&lt;li&gt;Leetco</summary>
      
    
    
    
    <category term="日常生活" scheme="https://blog.bingw.top/categories/%E6%97%A5%E5%B8%B8%E7%94%9F%E6%B4%BB/"/>
    
    
  </entry>
  
  <entry>
    <title>配置多个ssh账户</title>
    <link href="https://blog.bingw.top/5320236c27ac72/"/>
    <id>https://blog.bingw.top/5320236c27ac72/</id>
    <published>2023-12-05T20:53:33.000Z</published>
    <updated>2024-01-19T11:49:19.000Z</updated>
    
    <content type="html"><![CDATA[<div class="story post-story"><h2 id="生成密钥">生成密钥</h2><ol type="1"><li>检查已生成的SSH-key</li></ol><div class="sourceCode" id="cb1"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ~/.ssh</span></code></pre></div><ol start="2" type="1"><li>生成SSH-key</li></ol><div class="sourceCode" id="cb2"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh-keygen</span> <span class="at">-t</span> rsa <span class="at">-C</span> <span class="st">&quot;youremail@example.com&quot;</span> <span class="at">-f</span> ~/.ssh/github_id_rsa</span></code></pre></div><p>其中<span class='p red'>-C youremail@example.com</span>可以省略，只是标识了对应密钥的邮箱而已，<span class='p red'>github_id_rsa</span>是最后生成的文件名称，会保存在<span class='p blue'>~/.ssh/</span>下面，注意生成的不同key的文件名不要重复。</p><p><img src="https://bu.dusays.com/2023/12/05/656f1fb560865.png" class="lazyload" data-srcset="https://bu.dusays.com/2023/12/05/656f1fb560865.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p></div><div class="story post-story"><h2 id="配置文件config">配置文件config</h2><pre><code># Github bingw0919Host bingw0919.github.comHostName github.comPreferredAuthentications publickeyIdentityFile C:\Users\Administrator\.ssh\hp# Github 2515299122Host 2515299122.github.comHostName github.comPreferredAuthentications publickeyIdentityFile C:\Users\Administrator\.ssh\id_rsa</code></pre><table><thead><tr class="header"><th>字段</th><th>介绍</th></tr></thead><tbody><tr class="odd"><td>Host</td><td>Host 远程仓库的地址</td></tr><tr class="even"><td>HostName</td><td>托管网站的域名</td></tr><tr class="odd"><td>PreferredAuthentications</td><td>默认即可</td></tr><tr class="even"><td>IdentityFile</td><td>证书文件路径</td></tr></tbody></table></div><div class="story post-story"><h2 id="配置密钥">配置密钥</h2><p>实在不会的话搜一下各平台怎么添加ssh密钥吧</p></div><div class="story post-story"><h2 id="验证ssh">验证SSH</h2><div class="sourceCode" id="cb4"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-T</span> git@bingw0919.github.com</span><span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ssh</span> <span class="at">-T</span> git@2515299122.github.com</span></code></pre></div><p>正常单配置文件只需要使用<span class='p red'>ssh -T git@github.com</span>，多配置则需要指定连接，对应config文件中的Host即可</p><ol type="1"><li>测试2515299122</li></ol><p><img src="https://bu.dusays.com/2023/12/05/656f22f0b0f08.png" class="lazyload" data-srcset="https://bu.dusays.com/2023/12/05/656f22f0b0f08.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p><ol start="2" type="1"><li>测试bingw0919</li></ol><p><img src="https://bu.dusays.com/2023/12/05/656f2316ac81d.png" class="lazyload" data-srcset="https://bu.dusays.com/2023/12/05/656f2316ac81d.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p></div><div class="story post-story"><h2 id="修改.git配置文件">修改.git配置文件</h2><p>以上配置完毕后，可能会发现git仓库的各种操作可能会操作失败，这是因为电脑默认请求的是<span class='p red'>git@github.com</span>，因而对于~/.ssh/config下的配置不知道使用哪个密钥，此时可以进入仓库修改.git/config下的origin字段为上面配置的Host即可。</p><p><img src="https://bu.dusays.com/2023/12/05/656f2458a141d.png" class="lazyload" data-srcset="https://bu.dusays.com/2023/12/05/656f2458a141d.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p><p>修改后的文件为：</p><p><img src="https://bu.dusays.com/2023/12/05/656f2490050d1.png" class="lazyload" data-srcset="https://bu.dusays.com/2023/12/05/656f2490050d1.png" srcset="data:image/gif;base64,R0lGODlhAQABAIAAAP///////yH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" /></p><p>此时就可以和单配置一样正常操作了</p></div>]]></content>
    
    
      
      
    <summary type="html">&lt;div class=&quot;story post-story&quot;&gt;&lt;h2 id=&quot;生成密钥&quot;&gt;生成密钥&lt;/h2&gt;
&lt;ol type=&quot;1&quot;&gt;
&lt;li&gt;检查已生成的SSH-key&lt;/li&gt;
&lt;/ol&gt;
&lt;div class=&quot;sourceCode&quot; id=&quot;cb1&quot;&gt;&lt;pre class</summary>
      
    
    
    
    <category term="学习记录" scheme="https://blog.bingw.top/categories/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/"/>
    
    
    <category term="SSH" scheme="https://blog.bingw.top/tags/SSH/"/>
    
    <category term="Git" scheme="https://blog.bingw.top/tags/Git/"/>
    
  </entry>
  
</feed>
